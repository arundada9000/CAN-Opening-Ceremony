<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organization Intro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: poppins, Arial, Helvetica, sans-serif;
        }

        body {
            overflow: hidden;
        }

        .logo {
            position: relative;
            left: 50px;
        }

        .signature-area {
            width: 100%;
            position: relative;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .signature-area h1 {
            font-size: 48px;
            margin-bottom: 30px;
            color: #13007D;
            text-align: center;
        }

        #signatureCanvas {
            background-color: white;
            cursor: crosshair;
            border-radius: 15px;
            height: 200px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0px 0px 6px 10px rgb(0, 0, 0, 0.15);
            margin-top: 20px;
            margin-bottom: 20px;
            transition: border 0.75s ease;
        }

        #signatureCanvas:hover {
            border: 1px solid black;
        }

        .bottom-wrapper {
            width: 500px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .colors {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
        }

        .red {
            background-color: red;

        }

        .green {
            background-color: green;
        }

        .blue {
            background-color: blue;
        }

        .black {
            background-color: black;
        }

        .icon {
            border: 1px solid black;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon img {
            width: 10px;
            height: 10px;
        }

        .button-wrapper {
            display: flex;
            justify-content: center;
            gap: 25px;
            align-items: center;
        }

        #verifyButton,
        #clearButton,
        .next-button {
            margin-top: 10px;
            padding: 10px 20px;
            cursor: pointer;
            background-color: #13007D;
            color: #ffffff;
            border: none;
            border-radius: 5px;
            font-weight: bold;
        }

        #clearButton {
            background-color: #ffffff;
            color: #000000;
            border: 1px solid black;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 8px solid #f3f3f3;
            border-top: 8px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            margin: 20px auto;
            z-index: 3;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <style>
        .verified-wrapper {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
        }

        .verified-text-top {
            color: #13007D;
        }

        .swal-icon--success {
            border-color: #357710
        }

        .swal-icon--success:after,
        .swal-icon--success:before {
            content: "";
            border-radius: 50%;
            position: absolute;
            width: 60px;
            height: 120px;
            background: #fff;
            -webkit-transform: rotate(45deg);
            transform: rotate(45deg)
        }

        .swal-icon--success:before {
            border-radius: 120px 0 0 120px;
            top: -7px;
            left: -33px;
            -webkit-transform: rotate(-45deg);
            transform: rotate(-45deg);
            -webkit-transform-origin: 60px 60px;
            transform-origin: 60px 60px
        }

        .swal-icon--success:after {
            border-radius: 0 120px 120px 0;
            top: -11px;
            left: 30px;
            -webkit-transform: rotate(-45deg);
            transform: rotate(-45deg);
            -webkit-transform-origin: 0 60px;
            transform-origin: 0 60px;
            -webkit-animation: rotatePlaceholder 4.25s ease-in;
            animation: rotatePlaceholder 4.25s ease-in
        }

        .swal-icon--success__ring {
            width: 80px;
            height: 80px;
            border: 4px solid #7ce14140;
            border-radius: 50%;
            box-sizing: content-box;
            position: absolute;
            left: -4px;
            top: -4px;
            z-index: 2
        }

        .swal-icon--success__hide-corners {
            width: 5px;
            height: 90px;
            background-color: #fff;
            padding: 1px;
            position: absolute;
            left: 28px;
            top: 8px;
            z-index: 1;
            -webkit-transform: rotate(-45deg);
            transform: rotate(-45deg)
        }

        .swal-icon--success__line {
            height: 5px;
            background-color: #7ce141;
            display: block;
            border-radius: 2px;
            position: absolute;
            z-index: 2
        }

        .swal-icon--success__line--tip {
            width: 25px;
            left: 14px;
            top: 46px;
            -webkit-transform: rotate(45deg);
            transform: rotate(45deg);
            -webkit-animation: animateSuccessTip .75s;
            animation: animateSuccessTip .75s
        }

        .swal-icon--success__line--long {
            width: 47px;
            right: 8px;
            top: 38px;
            -webkit-transform: rotate(-45deg);
            transform: rotate(-45deg);
            -webkit-animation: animateSuccessLong .75s;
            animation: animateSuccessLong .75s
        }

        .verified-text {
            margin-top: 70px;
            color: #13007D;
        }

        .swal-icon {
            width: 80px;
            height: 80px;
            border-width: 4px;
            border-style: solid;
            border-radius: 50%;
            padding: 0;
            position: relative;
            box-sizing: content-box;
            margin: 20px auto
        }

        .swal-icon:first-child {
            margin-top: 32px
        }

        @keyframes animateSuccessLong {
            0% {
                width: 0;
                right: 46px;
                top: 54px
            }

            65% {
                width: 0;
                right: 46px;
                top: 54px
            }

            84% {
                width: 55px;
                right: 0;
                top: 35px
            }

            to {
                width: 47px;
                right: 8px;
                top: 38px
            }
        }

        @keyframes rotatePlaceholder {
            0% {
                -webkit-transform: rotate(-45deg);
                transform: rotate(-45deg)
            }

            5% {
                -webkit-transform: rotate(-45deg);
                transform: rotate(-45deg)
            }

            12% {
                -webkit-transform: rotate(-405deg);
                transform: rotate(-405deg)
            }

            to {
                -webkit-transform: rotate(-405deg);
                transform: rotate(-405deg)
            }
        }

        @keyframes animateSuccessTip {
            0% {
                width: 0;
                left: 1px;
                top: 19px
            }

            54% {
                width: 0;
                left: 1px;
                top: 19px
            }

            70% {
                width: 50px;
                left: -8px;
                top: 37px
            }

            84% {
                width: 17px;
                left: 21px;
                top: 48px
            }

            to {
                width: 25px;
                left: 14px;
                top: 45px
            }
        }

        .hidden {
            display: none;
        }

        .verified {
            transform: scale(2);
            color: #13007D;
        }

        .logo-wrapper {
            width: 100%;
            display: flex;
            align-items: start;
            justify-content: start;
        }

        .next-button {
            padding: 15px 30px;
            font-size: 1.3rem;
        }
    </style>
    <style>
        @import url("https://fonts.googleapis.com/css?family=Montserrat&display=swap");

        * {
            padding: 0;
            margin: 0;
        }

        .caption-wrapper {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #13007D;
        }


        .signature-caption-wrapper,
        .verified-caption-wrapper {
            color: #13007D;
            scale: 0.75;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .caption {
            font-family: "Montserrat Medium", poppins, Arial, Helvetica, sans-serif;
            max-width: 40ch;
            text-align: center;
            transform: scale(0.94);
            animation: scale 3s forwards cubic-bezier(0.5, 1, 0.89, 1);
        }

        @keyframes scale {
            100% {
                transform: scale(1);
            }
        }

        span {
            display: inline-block;
            opacity: 0;
            filter: blur(4px);
        }

        .mayor {
            font-weight: bold;
            color: red;
        }

        span:nth-child(1) {
            animation: fade-in 0.8s 0.1s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(2) {
            animation: fade-in 0.8s 0.2s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(3) {
            animation: fade-in 0.8s 0.3s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(4) {
            animation: fade-in 0.8s 0.4s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(5) {
            animation: fade-in 0.8s 0.5s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(6) {
            animation: fade-in 0.8s 0.6s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(7) {
            animation: fade-in 0.8s 0.7s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(8) {
            animation: fade-in 0.8s 0.8s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(9) {
            animation: fade-in 0.8s 0.9s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(10) {
            animation: fade-in 0.8s 1s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(11) {
            animation: fade-in 0.8s 1.1s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(12) {
            animation: fade-in 0.8s 1.2s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(13) {
            animation: fade-in 0.8s 1.3s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(14) {
            animation: fade-in 0.8s 1.4s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(15) {
            animation: fade-in 0.8s 1.5s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(16) {
            animation: fade-in 0.8s 1.6s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(17) {
            animation: fade-in 0.8s 1.7s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        span:nth-child(18) {
            animation: fade-in 0.8s 1.8s forwards cubic-bezier(0.11, 0, 0.5, 0);
        }

        @keyframes fade-in {
            100% {
                opacity: 1;
                filter: blur(0);
            }
        }

        .intro-logo {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translate(-50%, 0%);
            z-index: -1;
        }

        .intro-container,
        .verified-wrapper {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>

<body>
    <video src="./videos/Opening-vide.mp4" width="100%" height="100%" class="video"></video>
    <div class="caption-wrapper hidden" id="caption-wrapper">
        <img src="./images/CAN logo.png" alt="can logo" class="intro-logo" height="150px" width="150px">
        <h1 class="caption caption1 hidden">
            <span>नमस्कार</span>
            <span>तथा</span>
            <span>हार्दिक स्वागत!</span>
            <span>आदरणीय नगर प्रमुख</span>
            <span>श्री</span>
            <span class="mayor">खेलराज पाण्डे ज्यू,</span>
            <span>यहाँलाई</span>
            <span>यस</span>
            <span>CAN</span>
            <span>Federation B2C</span>
            <span>Summit 2025</span>
            <span>को</span>
            <span>उद्घाटन</span>
            <span>समारोहमा</span>
            <span>हार्दिक</span>
            <span>स्वागत</span>
            <span>गर्दछौं</span>
            <span>।</span>
        </h1>
        <audio src="./music/namaskar.mp3" hidden class="welcome-audio"></audio>
    </div>

    <div class="intro-container hidden" id="intro-container">
        <audio src="./music/Digital Signature.mp3" class="signature-audio" hidden></audio>
        <img class="logo" src="./images/CAN logo.png" height="100px" width="100px" alt="can logo">
        <div class="signature-area">
            <div class="wrapper">
                <h1>डिजिटल हस्ताक्षर</h1>
                <canvas id="signatureCanvas"></canvas>
                <div class="bottom-wrapper">
                    <div class="colors">
                        <div class="colors">
                            <div>Color : </div>
                            <div class="blue color"></div>
                            <div class="green color"></div>
                            <div class="red color"></div>
                            <div class="black color"></div>
                            <div class="icon color">
                                <img src="./images/pencil-icon.png" alt="Pencil Icon">
                            </div>
                        </div>
                    </div>
                    <div class="button-wrapper">
                        <button id="verifyButton">Verify</button>
                        <button id="clearButton">Clear</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="signature-caption-wrapper hidden" id="caption-wrapper2">
            <h1 class="caption caption2 hidden">
                <span>कार्यक्रमको</span>
                <span>औपचारिक</span>
                <span>उद्घाटनका</span>
                <span>लागि,</span>
                <span>मुख्य</span>
                <span>अतिथि</span>
                <span>श्री</span>
                <span>खेलराज</span>
                <span>पाण्डे </span>
                <span>ज्यूलाई</span>
                <span>डिजिटल</span>
                <span>हस्ताक्षर</span>
                <span>गर्न</span>
                <span>विनम्र</span>
                <span>अनुरोध</span>
                <span>गर्दछौं</span>
                <span></span>
                <span>।</span>
            </h1>
            <audio src="./music/namaskar.mp3" hidden class="welcome-audio"></audio>
        </div>
    </div>

    <div class="verified-wrapper hidden">
        <audio src="./music/digital-ribbon.mp3" hidden class="ribbon-voice"></audio>
        <div class="logo-wrapper">
            <img src="./images/CAN logo.png" alt="can logo" class="logo" height="100px" width="100px">
        </div>
        <h1 class="verified-text-top">Verified</h1>

        <div class="verified">
            <div class="swal-icon swal-icon--success">
                <span class="swal-icon--success__line swal-icon--success__line--long"></span>
                <span class="swal-icon--success__line swal-icon--success__line--tip"></span>
                <div class="swal-icon--success__ring"></div>
                <div class="swal-icon--success__hide-corners"></div>
            </div>
        </div>
        <h2 class="verified-text">Signature is Verified successfully.</h2>

        <div class="verified-caption-wrapper hidden" id="caption-wrapper3">
            <h1 class="caption caption3 hidden">
                <span>उद्घाटन</span>
                <span>प्रक्रिया</span>
                <span>अगाडि</span>
                <span>बढाउँदै</span>
                <span>,</span>
                <span>यहाँलाई</span>
                <span>डिजिटल</span>
                <span>रिबन</span>
                <span>काटेर </span>
                <span>कार्यक्रमलाई</span>
                <span>औपचारिक</span>
                <span>रूपमा</span>
                <span>प्रारम्भ</span>
                <span>गर्न</span>
                <span>अनुरोध</span>
                <span>गर्दछौं</span>
                <span></span>
                <span>।</span>
            </h1>
            <audio src="./music/namaskar.mp3" hidden class="welcome-audio"></audio>
        </div>
    </div>
    <script>
        const video = document.querySelector('video');
        video.addEventListener('ended', () => {
            document.querySelector(".video").classList.add("hidden");
            document.querySelector('.caption-wrapper').classList.remove('hidden');
            document.querySelector('.caption1').classList.remove('hidden');
            document.querySelector('.welcome-audio').play();
            window.removeEventListener('click', playVideo);

            setTimeout(() => {
                document.querySelector('#intro-container').classList.remove('hidden');
                document.querySelector('.signature-caption-wrapper').classList.remove('hidden');
                document.querySelector('.caption-wrapper').classList.add('hidden');
                document.querySelector('.intro-logo').classList.add('hidden');
                document.querySelector('.caption').classList.add('hidden');
                document.querySelector('.signature-audio').play();
                document.querySelector('.caption2').classList.remove('hidden');
            }, 14000);
        });


        window.addEventListener('click', playVideo);
        function playVideo() {
            video.play();
        }
        const canvas = document.getElementById('signatureCanvas');
        const ctx = canvas.getContext('2d');
        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        document.getElementById('clearButton').addEventListener('click', () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        });

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);
        canvas.addEventListener('touchcancel', stopDrawing);

        function startDrawing(e) {
            e.preventDefault();
            isDrawing = true;
            [lastX, lastY] = getMousePos(canvas, e);
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            const [x, y] = getMousePos(canvas, e);

            ctx.strokeStyle = "black";
            ctx.lineWidth = 2;
            ctx.lineCap = "round";

            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(x, y);
            ctx.stroke();

            [lastX, lastY] = [x, y];
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function getMousePos(canvas, evt) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;  // Scale factor for X
            const scaleY = canvas.height / rect.height;  // Scale factor for Y

            let clientX, clientY;

            if (evt.touches) {
                clientX = evt.touches[0]?.clientX || evt.changedTouches[0]?.clientX;
                clientY = evt.touches[0]?.clientY || evt.changedTouches[0]?.clientY;
            } else {
                clientX = evt.clientX;
                clientY = evt.clientY;
            }

            return [
                (clientX - rect.left) * scaleX,
                (clientY - rect.top) * scaleY
            ];
        }


        // Verify Button Handling
        const verifyButton = document.getElementById('verifyButton');
        if (verifyButton) {
            verifyButton.addEventListener('click', () => {
                startVerification();
            });
        }

        function startVerification() {
            document.getElementById('verifyButton').style.display = "none";

            const loading = document.createElement("div");
            loading.innerHTML = "<div class='loader'></div>";
            document.querySelector(".signature-area").appendChild(loading);

            setTimeout(() => {
                document.querySelector(".verified-wrapper").classList.remove("hidden");
                document.querySelector(".intro-container").classList.add("hidden");

                setTimeout(() => {
                    const ribbonVoice = document.querySelector(".ribbon-voice");
                    ribbonVoice.play();
                    document.querySelector(".verified-caption-wrapper").classList.remove("hidden");
                    document.querySelector(".caption3").classList.remove("hidden");

                    ribbonVoice.addEventListener("ended", () => {
                        setTimeout(() => {
                            window.location.href = "./ribbon.html";
                        })
                    });

                }, 1000);

            }, 3000);
        }

    </script>
</body>

</html>